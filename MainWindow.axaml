<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:FileShare"
        x:Class="FileShare.MainWindow"
        Title="MEGA Desktop Client"
        Width="1100"
        Height="700"
        Background="#1E1E1E">
    
  <Grid RowDefinitions="Auto,*,Auto">
    
    <!-- Top Bar -->
    <Border Grid.Row="0" 
            Background="#252526" 
            Height="60"
            CornerRadius="0,0,10,10">
      <Grid Margin="20,0">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="Auto"/>
          <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        
        <StackPanel Grid.Column="0" 
                    Orientation="Horizontal" 
                    Spacing="10"
                    VerticalAlignment="Center">
          <Button x:Name="RefreshButton"
                  Content="ðŸ”„ Refresh"
                  Height="40"
                  Padding="20,0"
                  Background="#2D2D30"
                  Foreground="White"
                  BorderThickness="0"
                  CornerRadius="8"
                  VerticalContentAlignment="Center"
                  Click="RefreshButton_Click"/>
          <Button x:Name="UploadButton"
                  Content="ðŸ“¤ Upload"
                  Height="40"
                  Padding="20,0"
                  Background="#2D2D30"
                  Foreground="White"
                  BorderThickness="0"
                  CornerRadius="8"
                  VerticalContentAlignment="Center"
                  Click="UploadButton_Click"/>
          <Button x:Name="DownloadButton"
                  Content="ðŸ“¥ Download"
                  Height="40"
                  Padding="20,0"
                  Background="#2D2D30"
                  Foreground="White"
                  BorderThickness="0"
                  CornerRadius="8"
                  VerticalContentAlignment="Center"
                  Click="DownloadButton_Click"/>
        </StackPanel>
        
        <TextBlock Grid.Column="1" 
                   Text="MEGA Cloud Storage"
                   Foreground="White"
                   FontSize="18"
                   FontWeight="Bold"
                   VerticalAlignment="Center"
                   HorizontalAlignment="Center"/>
        
        <ComboBox x:Name="AccountComboBox"
                  Grid.Column="2"
                  Width="250"
                  Height="40"
                  Margin="0,0,15,0"
                  Background="#2D2D30"
                  Foreground="White"
                  BorderThickness="0"
                  CornerRadius="8"
                  VerticalAlignment="Center"
                  HorizontalAlignment="Right"
                  SelectionChanged="AccountComboBox_SelectionChanged">
          <ComboBox.ItemTemplate>
            <DataTemplate x:DataType="local:SavedAccount">
              <StackPanel Orientation="Horizontal" Spacing="8" Margin="10,5">
                <TextBlock Text="ðŸ‘¤" 
                           VerticalAlignment="Center"
                           FontSize="14"/>
                <StackPanel>
                  <TextBlock Text="{Binding Email}" 
                             Foreground="White"
                             VerticalAlignment="Center"
                             FontSize="13"/>
                  <TextBlock Text="{Binding AccountName}" 
                             Foreground="#A0A0A0"
                             FontSize="10"/>
                </StackPanel>
              </StackPanel>
            </DataTemplate>
          </ComboBox.ItemTemplate>
        </ComboBox>
        
        <Button x:Name="LogoutButton"
                Grid.Column="3"
                Content="ðŸšª Add another account"
                Height="40"
                Padding="20,0"
                Background="#D13438"
                Foreground="White"
                BorderThickness="0"
                CornerRadius="8"
                VerticalContentAlignment="Center"
                VerticalAlignment="Center"
                Click="LogoutButton_Click"/>
      </Grid>
    </Border>
    
    <!-- File List -->
    <Border Grid.Row="1" 
            Margin="20,10,20,10" 
            Background="#252526"
            CornerRadius="10">
      <Grid>
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Border Grid.Row="0" 
                Background="#2D2D30" 
                CornerRadius="10,10,0,0"
                Height="50">
          <Grid Margin="20,0">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*"/>
              <ColumnDefinition Width="150"/>
              <ColumnDefinition Width="120"/>
              <ColumnDefinition Width="180"/>
            </Grid.ColumnDefinitions>
            
            <TextBlock Grid.Column="0" 
                       Text="Name" 
                       Foreground="#A0A0A0"
                       FontWeight="Bold"
                       VerticalAlignment="Center"/>
            <TextBlock Grid.Column="1" 
                       Text="Size" 
                       Foreground="#A0A0A0"
                       FontWeight="Bold"
                       VerticalAlignment="Center"/>
            <TextBlock Grid.Column="2" 
                       Text="Type" 
                       Foreground="#A0A0A0"
                       FontWeight="Bold"
                       VerticalAlignment="Center"/>
            <TextBlock Grid.Column="3" 
                       Text="Modified" 
                       Foreground="#A0A0A0"
                       FontWeight="Bold"
                       VerticalAlignment="Center"/>
          </Grid>
        </Border>
        
        <!-- Files ListBox -->
        <ListBox x:Name="FilesListBox"
                 Grid.Row="1"
                 Background="Transparent"
                 BorderThickness="0"
                 ScrollViewer.VerticalScrollBarVisibility="Auto">
          <ListBox.ItemTemplate>
            <DataTemplate x:DataType="local:MegaFileItem">
              <Border Background="Transparent" 
                      Padding="0,2"
                      CornerRadius="6"
                      Margin="2">
                <Border.Styles>
                  <Style Selector="Border:pointerover">
                    <Setter Property="Background" Value="#2D2D30"/>
                  </Style>
                  <Style Selector="Border:selected">
                    <Setter Property="Background" Value="#3E3E40"/>
                  </Style>
                </Border.Styles>
                
                <Grid Margin="20,10">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="150"/>
                    <ColumnDefinition Width="120"/>
                    <ColumnDefinition Width="180"/>
                  </Grid.ColumnDefinitions>
                  
                  <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="10">
                    <TextBlock Text="{Binding Icon}" 
                               FontSize="16" 
                               VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding Name}" 
                               Foreground="White" 
                               VerticalAlignment="Center"
                               TextTrimming="CharacterEllipsis"/>
                  </StackPanel>
                  
                  <TextBlock Grid.Column="1" 
                             Text="{Binding SizeFormatted}" 
                             Foreground="#A0A0A0"
                             VerticalAlignment="Center"/>
                  <TextBlock Grid.Column="2" 
                             Text="{Binding Type}" 
                             Foreground="#A0A0A0"
                             VerticalAlignment="Center"/>
                  <TextBlock Grid.Column="3" 
                             Text="{Binding ModifiedDate}" 
                             Foreground="#A0A0A0"
                             VerticalAlignment="Center"/>
                </Grid>
              </Border>
            </DataTemplate>
          </ListBox.ItemTemplate>
        </ListBox>
        
        <!-- Empty State -->
        <TextBlock x:Name="EmptyStateText"
                   Grid.Row="1"
                   Text="No files found"
                   Foreground="#A0A0A0"
                   FontSize="16"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   IsVisible="False"/>
      </Grid>
    </Border>
    
    <!-- Status Bar -->
    <Border Grid.Row="2" 
            Background="#252526" 
            Height="50"
            CornerRadius="10,10,0,0">
      <Grid Margin="20,0">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        
        <StackPanel Grid.Column="0" 
                    Orientation="Horizontal" 
                    Spacing="10"
                    VerticalAlignment="Center">
          <TextBlock x:Name="CurrentAccountText"
                     Text=""
                     Foreground="#A0A0A0"
                     VerticalAlignment="Center"/>
          
          <TextBlock x:Name="StatusTextBlock"
                     Text="Ready"
                     Foreground="#A0A0A0"
                     VerticalAlignment="Center"/>
        </StackPanel>
        
        <ProgressBar x:Name="OperationProgressBar"
                     Grid.Column="1"
                     Width="200"
                     Height="20"
                     IsVisible="False"
                     Minimum="0"
                     Maximum="100"
                     Foreground="#0078D4"
                     Background="#2D2D30"
                     CornerRadius="10"
                     VerticalAlignment="Center"/>
      </Grid>
    </Border>
    
  </Grid>
</Window>